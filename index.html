<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HSC 2025 Countdown</title>
  <style>

  </style>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="light">
  <nav>ЁЯУШ HSC 2025 Countdown & Info</nav>
  <div class="toggle">
    <!-- <button onclick="toggleTheme()">ЁЯМЧ ржерж┐ржо ржмржжрж▓рж╛ржУ</button> -->
  </div>
  <div class="info-box">
    HSC 2025 ржкрж░рзАржХрзНрж╖рж╛ рж╢рзБрж░рзБ ЁЯУЕ <strong>рзирзм ржЬрзБржи рзирзжрзирзл</strong> ржерзЗржХрзЗред<br>
    рж╕ржХрж╛рж▓рзЗрж░ рж╕ржорзЯ: рззрзжржЯрж╛-рззржЯрж╛, ржмрж┐ржХрзЗрж▓рзЗрж░ рж╕ржорзЯ: рзиржЯрж╛-рзлржЯрж╛ред<br>
    ржПржЦрж╛ржирзЗ ржЖржкржирж┐ рж▓рж╛ржЗржн ржХрж╛ржЙржирзНржЯржбрж╛ржЙржи ржУ ржкрж░ржмрж░рзНрждрзА ржкрж░рзАржХрзНрж╖рж╛рж░ ржЖржкржбрзЗржЯ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред
  </div>
  <div class="container" id="exam-highlight"></div>
  <div class="container" id="exam-list"></div>

  <script>
    const body = document.body;
    function toggleTheme() {
      body.classList.toggle('dark');
      body.classList.toggle('light');
    }

    const examDataURL = '/exams.json'; // URL to fetch exam data

    async function fetchExams() {
      const res = await fetch(examDataURL);
      return res.json();
    }

    function getRemainingTime(target) {
      const now = new Date();
      const total = Date.parse(target) - now;
      const seconds = Math.floor((total / 1000) % 60);
      const minutes = Math.floor((total / 1000 / 60) % 60);
      const hours = Math.floor((total / (1000 * 60 * 60)) % 24);
      const days = Math.floor(total / (1000 * 60 * 60 * 24));
      return { total, days, hours, minutes, seconds };
    }

    async function renderExams() {
      const exams = await fetchExams();
      const now = new Date();
      // Only keep exams whose date is in the future
      const upcoming = exams
        .filter(e => new Date(e.date) > now)
        .sort((a, b) => new Date(a.date) - new Date(b.date));

      const highlightBox = document.getElementById("exam-highlight");
      const listBox = document.getElementById("exam-list");
      highlightBox.innerHTML = "";
      listBox.innerHTML = "";

      if (upcoming.length > 0) {
        const next = upcoming[0];
        const remain = getRemainingTime(next.date);
        const high = document.createElement("div");
        high.className = "info-box highlight-upcoming";
        high.innerHTML = `ЁЯФФ ржкрж░ржмрж░рзНрждрзА ржкрж░рзАржХрзНрж╖рж╛: <br><br><strong>${next.subject}</strong><br>
        ЁЯУЕ ${new Date(next.date).toLocaleDateString("bn-BD")} | ЁЯХТ ${next.shift}<br>
        тП│ ржмрж╛ржХрж┐: ${remain.days} ржжрж┐ржи ${remain.hours} ржШржгрзНржЯрж╛ ${remain.minutes} ржорж┐ржирж┐ржЯ ${remain.seconds} рж╕рзЗржХрзЗржирзНржб`;
        highlightBox.appendChild(high);
      }

      upcoming.forEach((exam) => {
        const div = document.createElement("div");
        div.className = "exam";
        const remain = getRemainingTime(exam.date);
        div.innerHTML = `
          <div class="subject">${exam.subject}</div>
          <div class="date">ЁЯУЕ ${new Date(exam.date).toLocaleDateString("bn-BD")}</div>
          <div class="time">ЁЯХТ рж╕ржорзЯ: ${exam.shift}</div>
          <div class="countdown">тП│ ржмрж╛ржХрж┐ рж╕ржорзЯ: ${remain.days} ржжрж┐ржи ${remain.hours} ржШржгрзНржЯрж╛ ${remain.minutes} ржорж┐ржирж┐ржЯ ${remain.seconds} рж╕рзЗржХрзЗржирзНржб</div>
        `;
        listBox.appendChild(div);
      });
    }

    setInterval(renderExams, 1000);
    renderExams();

    if ("Notification" in window && Notification.permission !== "denied") {
      Notification.requestPermission().then(permission => {
        if (permission === "granted") {
          new Notification("ЁЯУЕ HSC 2025 Countdown ржЪрж╛рж▓рзБ рж╣ржпрж╝рзЗржЫрзЗ!", {
            body: "ржкрж░ржмрж░рзНрждрзА ржкрж░рзАржХрзНрж╖рж╛рж░ рж╕ржоржпрж╝ ржжрзЗржЦрзЗ ржирж┐ржиред",
          });
        }
      });
    }
  </script>
  <footer class="footer-custom">
    Developed by <a href="https://github.com/shajidul-sobuj" target="_blank" rel="noopener" class="footer-link">Shajidul Islam Sobuj</a> | ┬й 2025
  </footer>
</body>
</html>
